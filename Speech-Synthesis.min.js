const blogPost = document.getElementById('blogRpost');
const speakBtn = document.getElementById('speak-btn');
const pauseBtn = document.getElementById('pause-btn');
const resumeBtn = document.getElementById('resume-btn');
const stopBtn = document.getElementById('stop-btn');

let speechSynthesis = window.speechSynthesis;
let utterance = new SpeechSynthesisUtterance();

// Configure speech parameters
utterance.lang = 'en-US';
utterance.rate = 1;
utterance.pitch = 1;

// Request a male voice
utterance.voiceURI = 'native';
utterance.voice = speechSynthesis.getVoices().find(voice => voice.name === 'Microsoft David Desktop');

function filterElements(node) {
  return node.nodeName !== 'PRE';
}

speakBtn.addEventListener('click', speak) 

  function speak() { 
  const filteredNodes = Array.from(blogPost.childNodes).filter(filterElements);
  const filteredContent = filteredNodes.map(node => node.textContent).join(' ');

  if (filteredContent !== '') {
    utterance.text = filteredContent;
    speechSynthesis.speak(utterance);
  }
});

pauseBtn.addEventListener('click', () => {
  if (speechSynthesis.speaking) {
    speechSynthesis.pause();
  }
});

resumeBtn.addEventListener('click', () => {
  if (speechSynthesis.paused) {
    speechSynthesis.resume();
  }
});

stopBtn.addEventListener('click', () => {
  speechSynthesis.cancel();
});
